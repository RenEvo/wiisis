//////////////////////////////////////////////////////
// Wii Remote Core File
// Copyright (C), RenEvo Software & Designs, 2007
//
// WR_CTimer.h
//
// Purpose: High-resolution timer
//
// History:
//	- 11/3/07 : File created - KAK
//////////////////////////////////////////////////////

#ifndef _WR_CTIMER_H_
#define _WR_CTIMER_H_

#include "Interfaces\WR_ITimer.h"

class CWR_Timer : public IWR_Timer
{
	SETUP_WR_MODULE();

protected:
	// Timer controls
	LARGE_INTEGER m_nStartTimer, m_nLastUpdate;
	float m_fDT, m_fLifeTime;

public:
	//////////////////////////////////////////////////////
	// Construtor
	//////////////////////////////////////////////////////
	CWR_Timer(void);
private:
	CWR_Timer(CWR_Timer const&) {};
	CWR_Timer& operator =(CWR_Timer const&) {return *this;}

public:
	//////////////////////////////////////////////////////
	// Destructor
	//////////////////////////////////////////////////////
	virtual ~CWR_Timer(void);

public:
	//////////////////////////////////////////////////////
	// Init
	//
	// Purpose: Initialize the timer
	//
	// Returns error code (see WR_WIITIMER_ERROR)
	//////////////////////////////////////////////////////
	virtual int Initialize(void);

	//////////////////////////////////////////////////////
	// Shutdown
	//
	// Purpose: Clean up timer system
	//////////////////////////////////////////////////////
	virtual void Shutdown(void);

	//////////////////////////////////////////////////////
	// Update
	//
	// Purpose: Mark the timer as starting a new frame
	//////////////////////////////////////////////////////
	virtual void Update(void);

	//////////////////////////////////////////////////////
	// GetCurrTime
	//
	// Purpose: Returns current application time
	//	based on start of this frame
	//////////////////////////////////////////////////////
	virtual float GetCurrTime(void) const;

	//////////////////////////////////////////////////////
	// GetPreciseTime
	//
	// Purpose: Returns current time at the moment
	//	of this call
	//////////////////////////////////////////////////////
	virtual float GetPreciseTime(void) const;

	//////////////////////////////////////////////////////
	// GetDeltaTime
	//
	// Purpose: Return amount of time that passed since
	//	last update
	//////////////////////////////////////////////////////
	virtual float GetDeltaTime(void) const;

	//////////////////////////////////////////////////////
	// GetLifeTime
	//
	// Purpose: Returns amount of time that has elapsed
	//	during the lifetime of the app
	//////////////////////////////////////////////////////
	virtual float GetLifeTime(void) const;
};

#endif //_CTIMER_H_